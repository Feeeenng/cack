<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="utf-8">
    <!-- 页面标题 -->
    <title>
        {% block title %}
            Cack|主页
        {% endblock %}
    </title>

    {% block styles %}  <!-- 样式区 -->
        <link rel="stylesheet" charset="utf-8" type="text/css" href="//cdn.bootcss.com/semantic-ui/2.2.4/semantic.min.css"/>
        <link rel="stylesheet" href="{{ url_for('static', filename='lib/jBox/Source/jBox.css') }}">
        <link rel="stylesheet" href="{{ url_for('static', filename='lib/jBox/Source/plugins/Notice/jBox.Notice.css') }}">
        <link rel="stylesheet" href="{{ url_for('static', filename='lib/jBox/Source/themes/NoticeFancy.css') }}">
        <style>
            #user_info:hover,
            #my_orders:hover,
            #shopping_cart:hover,
            #tickets:hover,
            #favorites:hover,
            #settings:hover,
            #sign_out:hover {
                color: white!important;
                background-color: #00B5AD!important;
                outline: 1px solid rgba(34,36,38,.15)!important;
            }
        </style>
    {% endblock %}

    {#宏#}
    {% macro navigation(active='home') %}
        <div class="ui inverted menu">
            <div class="ui container">
                <a class="teal item {{ 'active' if active == 'home' else '' }}" href="/">
                    <i class="home icon"></i> cack
                </a>
                <a class="teal item {{ 'active' if active == 'shop' else '' }}">
                    <i class="shop icon"></i> 商品
                </a>
                <a class="teal item {{ 'active' if active == 'users' else '' }}">
                    <i class="users icon"></i> 朋友
                </a>
                <a class="teal item {{ 'active' if active == 'comment' else '' }}">
                    <i class="comment icon"></i> 事件
                </a>

                <div class="right menu">
                    {% if current_user.is_authenticated %}
                        <a class="ui black label">
                            <div class="ui inline combo top right pointing dropdown">
                                <img class="ui right spaced avatar image" src="http://www.semantic-ui.cn/images/avatar/small/elliot.jpg">
                                Elliot
                                <i class="dropdown icon"></i>
                                <div class="menu">
                                    <div class="item" id="user_info"><i class="edit icon"></i> 用户信息 </div>
                                    <div class="item" id="my_orders"><i class="file text icon"></i> 我的订单 </div>
                                    <div class="item" id="shopping_cart"><i class="add to cart icon"></i> 购物车 </div>
                                    <div class="item" id="tickets"><i class="bookmark icon"></i> 卡券 </div>
                                    <div class="item" id="favorites"><i class="star icon"></i> 收藏夹 </div>
                                    <div class="item" id="settings"><i class="settings icon"></i> 设置 </div>
                                    <div class="ui divider"></div>
                                    <div class="item" id="sign_out"><i class="sign out icon"></i> 注销 </div>
                                </div>
                            </div>
                        </a>
                    {% else %}
                        <a class="teal item {{ 'active' if active == 'sign in' else '' }}" href="/auth/login"><i class="sign in icon"></i> 登录 </a>
                        <a class="teal item {{ 'active' if active == 'edit' else '' }}" href="/auth/register"><i class="edit icon"></i> 注册 </a>
                    {% endif %}
                </div>
            </div>
        </div>
    {% endmacro %}
</head>

<body>
    {% block navigation %}  <!-- 导航区 -->
        {{ navigation() }}
    {% endblock %}

    <div class="ui main container">
        <!-- messages -->
        {% block content %}  <!-- 内容区 -->
        {% endblock %}
    </div>

    <footer>
        {% block footer %}  <!-- 页脚区 -->
        {% endblock %}
    </footer>

    {% block scripts %}  <!-- js脚本区 -->
        <script src="http://libs.baidu.com/jquery/2.0.0/jquery.min.js"></script>
        <script src="http://cdnjs.cloudflare.com/ajax/libs/vue/1.0.26/vue.min.js"></script>
        <script src="//cdn.bootcss.com/semantic-ui/2.2.4/semantic.min.js"></script>

        <script src="{{ url_for('static', filename='lib/jBox/Source/jBox.js') }}"></script>
        <script src="{{ url_for('static', filename='lib/jBox/Source/plugins/Notice/jBox.Notice.js') }}"></script>
        <script>
            $(document).ready(function () {
                $('.dropdown').dropdown({
                     action: 'combo'
                });
                var msgs = {{ get_flashed_messages(True) | tojson }};
                for(var index in msgs){
                    var category = msgs[index][0];
                    var msg = msgs[index][1];
                    var color = '';
                    if(category == 'error'){
                        color = 'red';
                    } else if(category == 'info'){
                        color = 'green';
                    } else if(category == 'warning'){
                        color = 'yellow';
                    } else {
                        color = 'blue'
                    }
                    new jBox('Notice', {
                        theme: 'NoticeFancy',
                        attributes: {
                          x: 'left',
                          y: 'bottom'
                        },
                        color: color,
                        content: msg,
                        audio: '{{ url_for('static', filename='lib/jBox/Source/audio/bling2') }}',
                        volume: 80,
                        animation: {open: 'slide:bottom', close: 'slide:left'}
                    });
                }
            });
        </script>
    {% endblock %}
</body>
</html>